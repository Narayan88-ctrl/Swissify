# Swissify rules — packs & rules
packs:
  all: ["orthography_core", "swiss_lexicon", "numbers_swiss", "quotes_punct"]
  enable: ["orthography_core", "swiss_lexicon", "numbers_swiss", "quotes_punct"]

rules:
  # ─────────────────────────────────────
  # ORTHOGRAPHY (core Swiss standard)
  # ─────────────────────────────────────
  - { pack: orthography_core, kind: regex,  find: "ß", replace: "ss" }

  # Optional Swiss-style umlaut transliteration
  - { pack: orthography_core, kind: replace, find: "ä", replace: "ae" }
  - { pack: orthography_core, kind: replace, find: "ö", replace: "oe" }
  - { pack: orthography_core, kind: replace, find: "ü", replace: "ue" }
  - { pack: orthography_core, kind: replace, find: "Ä", replace: "Ae" }
  - { pack: orthography_core, kind: replace, find: "Ö", replace: "Oe" }
  - { pack: orthography_core, kind: replace, find: "Ü", replace: "Ue" }

  # Common words with ß
  - { pack: orthography_core, kind: regex, find: "\\bStraße\\b", replace: "Strasse" }
  - { pack: orthography_core, kind: regex, find: "\\bgroß\\b",   replace: "gross" }
  - { pack: orthography_core, kind: regex, find: "\\bmaß\\b",    replace: "mass" }
  - { pack: orthography_core, kind: regex, find: "\\bMaß\\b",    replace: "Mass" }

  # ─────────────────────────────────────
  # SWISS LEXICON (safe Swiss High-German choices)
  # ─────────────────────────────────────
  - { pack: swiss_lexicon, kind: regex, find: "\\bFahrrad\\b",      replace: "Velo" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bFahrräder\\b",    replace: "Velos" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bKrankenhaus\\b",  replace: "Spital" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bBürgersteig\\b",  replace: "Trottoir" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bErdgeschoss\\b",  replace: "Parterre" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bZugbegleiter\\b", replace: "Kondukteur" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bSchaffner\\b",    replace: "Kondukteur" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bQuark\\b",        replace: "Hüttenkäse" }
  - { pack: swiss_lexicon, kind: regex, find: "\\bSahne\\b",        replace: "Rahm" }

  # ─────────────────────────────────────
  # NUMBERS: Swiss formatting
  #  - thousands: apostrophe 1’234’567
  #  - decimal: dot 123.45
  #  - CHF placement: "CHF 1’234.50"
  # ─────────────────────────────────────

  # 2.1 German decimal comma → dot (digits on both sides)
  - { pack: numbers_swiss, kind: regex, find: "(\\d),(\\d{1,3})(?!\\d)", replace: "\\1.\\2" }
  - { pack: numbers_swiss, kind: regex, find: "(\\d),(\\d{2,})",         replace: "\\1.\\2" }

  # 2.2 Thousand separators: dots between 3-digit groups → apostrophe
  # e.g. 1.234 -> 1’234,  1.234.567 -> 1’234’567
  - { pack: numbers_swiss, kind: regex, find: "(?<=\\d)\\.(?=\\d{3}(?:\\.\\d{3})*\\b)", replace: "’" }

  # 2.3 Tidy CHF placement: "1’234.50 CHF" → "CHF 1’234.50"
  - { pack: numbers_swiss, kind: regex, find: "\\b(\\d[\\d’.]*\\d(?:\\.\\d{1,2})?)\\s*CHF\\b", replace: "CHF \\1" }

  # 2.4 Also "CHF1’234.50" → "CHF 1’234.50"
  - { pack: numbers_swiss, kind: regex, find: "\\bCHF(\\d)", replace: "CHF \\1" }

  # 2.5 Remove spaces before percent: "45 %" → "45%"
  - { pack: numbers_swiss, kind: regex, find: "(\\d)\\s+%", replace: "\\1%" }

  # ─────────────────────────────────────
  # QUOTES & PUNCTUATION (Swiss « »)
  # ─────────────────────────────────────
  # German „…“ → Swiss «…»
  - { pack: quotes_punct, kind: regex, find: "„\\s*", replace: "«" }
  - { pack: quotes_punct, kind: regex, find: "\\s*“", replace: "»" }

  # English “ … ” → Swiss « … »
  - { pack: quotes_punct, kind: regex, find: "“\\s*", replace: "«" }
  - { pack: quotes_punct, kind: regex, find: "\\s*”", replace: "»" }

  # Straight quotes " ... " → Swiss « ... »
  - { pack: quotes_punct, kind: regex, find: "\\s*\"\\s*",   replace: "«" }
  - { pack: quotes_punct, kind: regex, find: "\\s*\"(?!\\w)", replace: "»" }

  # Space cleanup: no double spaces around «»
  - { pack: quotes_punct, kind: regex, find: "«\\s+", replace: "«" }
  - { pack: quotes_punct, kind: regex, find: "\\s+»", replace: "»" }
